const ADV = "The Great Adventure of {Name}<br>One sunny {adjective} morning, {Name}, the {adjective-one} {animal}, decided it was time to embark on a {adjective-three} adventure. Packing their trusty {object} and a bag full of {plural noun}, they set off toward the {place}.<br>As they walked, they encountered a {adjective-two} {creature} who was {verb ending in -ing} near a {object-one}. \"{Exclamation}!\" said {Name}, \"What are you doing here?\"<br>The {creature} replied, \"I'm on a quest to find the legendary {adjective-three} {object-four}. Would you like to join me?\"<br>Without hesitation, {Name} agreed, and together they ventured into the {adjective} forest. Along the way, they had to cross a {adjective} river filled with {plural noun} and climb a {adjective} mountain that smelled like {food}.<br>Finally, after {number} hours of searching, they found the {adjective-three} {object-four} hidden inside a {place}. It was glowing with {color} light! \"{Exclamation}!\" they both shouted in excitement.<br>From that day on, {Name} and the {creature} became the best of friends, sharing their {adjective} story with everyone they met. And they lived {adverb} ever after."

const ADV2 = "The Great {Adjective} Adventure<br>One day, {Name} woke up feeling {Emotion}. They decided it was time for an adventure. Packing their {Noun}, they set off towards the mysterious {Place}.<br>Along the way, they met a {Adjective} {Animal} who offered them a {Object}. \"Take this,\" the creature said, \"you'll need it to defeat the {Adjective} {Villain}.\"<br>Just as {Name} was about to enter the {Place}, the ground shook, and {Villain} appeared, laughing {Adverb}. \"You'll never make it past me!\"<br>But {Name} had a plan. Using their {Object}, they {Action Verb} right into the heart of the {Place}, facing their destiny head-on...<br>Fill in the blanks, and let's see what hilarious or epic story you create! If you want me to write one for you, just give me a few words to work with and I’ll craft something fun!<br>As {Name} stepped into the heart of the {Place}, gripping their {Object} tightly, the air crackled with tension. The {Adjective} {Villain} towered above them, eyes glowing with menace.<br>\"You think that puny {Object} can stop me?\" {Villain} sneered, stepping forward.<br>But {Name} had a trick up their sleeve. They remembered the advice of the {Adjective} {Animal} from earlier and held up the {Object}, chanting a mysterious phrase they had just made up.<br>Suddenly, the {Place} trembled, and the walls shimmered. A secret passage appeared behind {Villain}, leading to a hidden chamber filled with {Plural Noun}.<br>\"{Villain}, your reign of terror ends now!\" {Name} declared, leaping through the passage and triggering the chamber’s ancient magic.<br>Bright light enveloped the room as {Villain} howled in defeat. When the glow faded, the menace was gone, replaced by a harmless {Silly Noun}, shivering in confusion.<br>{Name} had done it! The {Place} was safe, and they would forever be known as the hero who outsmarted the {Villain}.<br>As they stepped out into the sunset, the {Adjective} {Animal} appeared once more, nodding approvingly. \"You did well,\" it said. \"But beware—the world is full of even stranger adventures...\"<br>And just like that, {Name} knew their journey was far from over.<br>As {Name} stepped out of the hidden chamber, the world outside had changed. The skies were clearer, the {Place} no longer shrouded in darkness. The once-menacing {Villain}, now a harmless {Silly Noun}, waddled off into the distance, mumbling about a new life as a {Odd Profession}.<br>{Name} took a deep breath, feeling the weight of their adventure settle into their bones. They had faced danger, outwitted evil, and discovered the true magic within themselves. But as the {Adjective} {Animal} had warned, the world was full of even stranger adventures.<br>With a grin, {Name} picked up their trusty {Object} and started walking toward the horizon, ready for whatever came next.<br>Little did they know, just beyond the hills, another mystery awaited…<br>And thus, the legend of {Name} lived on! Want to give them a surprise epilogue or a twist ending? Let's make it even wilder!";

const ADV3 = "Once upon a time, in a [adjective] kingdom, there lived a [adjective] [noun]. This [noun] was special because they could [verb] better than anyone else.<br> One day, while walking through the [place], they found a [adjective] [object]. When they touched it, the [object] suddenly [verb].<br>Excited and curious, they decided to take it to the [place] where they met a wise [noun] who said, \"This is no ordinary [object]. It has the power to [verb].\"<br>Together, they set off on an adventure to [place] to uncover its secrets. Along the way, they faced a [adjective] challenge and had to use their [noun] to succeed.<br>Finally, they arrived at [place], where they discovered the truth—the [object] was meant to [verb] and bring [noun] to the world.<br>And so, from that day forward, the [noun] used their [object] to help others, making the kingdom a place of [noun] forevermore.<br>The end.";

const ADV4 = "Once upon a time, in a quiet village by the [place], there lived a young [character] named [name]. Unlike anyone else, [name] had a special gift—the ability to [power].<br>One day, while exploring the [location] forest, [name] stumbled upon a mysterious [object] glowing in the moonlight. As they reached out to touch it, the object suddenly [action].<br>Realizing the magic within, [name] set off on an adventure to [destination], encountering a wise [creature] and a mischievous [character] along the way.<br>With courage and kindness, [name] finally reached [final place], where they discovered the truth about their gift—it had the power to [ability].<br>And so, from that day forward, [name] used their gift to bring [effect] to the world, making the village a place of [outcome] forevermore.";

const ADV5 = "Once upon a time, in a [adjective] kingdom where the [plural noun] wispered secrets to the wind, lived a humble baker named [Name]. One day as they were going for a walk [Name] encountered a [adjective-one] [creature]. The [adjective-one] [creature] looked looked directly at [Name] and they very scared. But, they remembered they had their trusty [tool] so they used the [tool] and [verb-past] away from the [adjective-one] [creature]. Then as [Name] go back home they returned their [tool] to its resting place and lived hapilly ever after.";

const ADV6 = "Wizards of Old <br> Magicians have been around of centuries. One famous magician was named [Name] the [verb-ing] trickster! He had [number] invisibility [clothing], twelve [verb-ing] doves, and one [adjective], talking lion. He roamed the earth, searching for an aprentice. However, all he found an an annoying, [adjective], smelly troll. This was no ordinary troll, though! It was a magical one, who quickly turned the magician into a [noun], and tossed him into [gross noun] volcano! Yikes";

const ADV7 = "The Lost Treasure<br>One day, [name] was walking through the [place] when they found a [adjective] [object] on the ground. Curious, they picked it up and saw that it had a [color] marking on it.<br>Suddenly, a [adjective] [creature] appeared and said, \"That belongs to the [character], and you must return it before [event] happens!\"<br>[name] didn’t know what to do. They decided to travel to the [place] to find the [character] and give back the [object].<br>Along the way, they met a [adjective] [helper] who offered advice: \"You must be [adjective] and follow the [noun] to reach your destination.\"<br>After a long journey, [name] finally arrived at the [place]. The [character] smiled and said, \"Thank you for bringing back my [object]. Because of your kindness, the land will now be [adjective] forever.\"<br>The end.";

const ADV8 = "Have your heard of a [verb-ing] cat? Well, now you have! These little guys are [adjective], and strong! They can climb [plural noun] up to [number] feet high, and [verb] over [plural noun] at [number] miles per hour! They eat [type of dinosaur] eggs for breakfast, and love slurping on [bug] juice. They're cute, too. You won't find them here, though. They live deep within the [color] jungles of [fast food restaurant] island.";

const STORIES = [ADV, ADV2, ADV3, ADV4, ADV5, ADV6, ADV7, ADV8];

const delimeter = /[{}]/;


function parseStory(story) {
    // parant for gen inputs
    const inputBox = document.querySelector("#inputBox");
    inputBox.innerHTML = "";

    // split on . and ? and !
    let list = story.split(delimeter);

    let inputList = [];

    // get all the word names
    for (let i = 1; i < list.length; i += 2) {
        //console.log(list[i]);
        inputList.push(list[i]);
    }

    // make unique
    let unique = [... new Set(inputList)];

    // list of inputes and names
    let uniqueInput = [];

    // create inputs
    unique.forEach((value, index) => {
        let div = document.createElement("div");
        div.className = "input-box";
        let label = document.createElement("label");
        let input = document.createElement("input");

        label.innerHTML = value;

        uniqueInput.push({ value, input });

        div.appendChild(label);
        div.appendChild(input);
        inputBox.appendChild(div);
    });

    // change story 
    let button = document.createElement("button");
    button.innerHTML = "Fill";
    inputBox.appendChild(button);
    button.addEventListener("click", () => {
        let formated = story;
        uniqueInput.forEach((value, index) => {
            formated = formated.replaceAll(`{${value.value}}`, value.input.value);
        });

        document.querySelector("#out").innerHTML = formated;
    });
}


window.onload = function () {
    let storyInput = document.querySelector("#storyInput");
    const storyEnter = document.querySelector("#storyEnter");

    // story index 
    let index = 0;

    // print story
    function printStory() {
        if (index >= STORIES.length) {
            index = 0;
        }
        if (index < 0) {
            index = STORIES.length - 1;
        }

        storyInput.value = STORIES[index];
    }

    // auto fill buttons
    const lastStory = document.querySelector("#lastStory");
    const nextStory = document.querySelector("#nextStory");

    lastStory.addEventListener("click", () => {
        index--;
        printStory()
    });

    nextStory.addEventListener("click", () => {
        index++;
        printStory()
    });

    printStory();

    storyEnter.addEventListener("click", () => {
        let story = storyInput.value;
        if (!story || story == "") {
            return;
        }
        // replace [] with {}
        story = story.replaceAll('[', '{');
        story = story.replaceAll(']', '}');

        // replace () with {}
        story = story.replaceAll('(', '{');
        story = story.replaceAll(')', '}');

        parseStory(story);
    });
}